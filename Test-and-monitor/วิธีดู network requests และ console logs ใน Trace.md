# วิธีดู network requests และ console logs ใน Trace Viewer

การเจาะลึกดู **Network Requests** และ **Console Logs** ใน Playwright Trace Viewer คือหัวใจสำคัญของการแก้บั๊กที่ "มองไม่เห็นด้วยตาเปล่า" (เช่น API พัง หรือ JavaScript Error) ครับ

เมื่อเปิดไฟล์ Trace ขึ้นมาแล้ว ให้ทำตามขั้นตอนเน้นๆ ดังนี้ครับ:

### 1. วิธีดู Console Logs (หา JavaScript Error)

ส่วนนี้จะบอกเราว่า Browser "บ่น" อะไรบ้าง (เหมือนกด F12 ดู Console ใน Chrome)

1. **เลือก Action:** ที่แถบด้านซ้าย (Actions) ให้คลิกที่บรรทัดที่คุณสงสัย หรือคลิกที่ **X สีแดง** (จุดที่เทสต์พัง)
2. **หาหน้าต่าง Details:** ปกติจะอยู่ด้าน **ขวา** หรือ **ด้านล่าง** ของหน้าจอ (ขึ้นอยู่กับขนาดจอ)
3. **คลิกแท็บ "Console":**
    * คุณจะเห็นข้อความทั้งหมดที่เว็บแอปฯ ของคุณพ่นออกมา
    * **สังเกตสีแดง:** มองหาบรรทัดสีแดง เช่น `Uncaught TypeError: Cannot read properties of undefined` หรือ `Failed to load resource`
    * **ประโยชน์:** ถ้าหน้าเว็บขาวโพลน (White Screen of Death) หรือกดปุ่มแล้วเงียบ มักจะเจอสาเหตุที่นี่ครับ

***

### 2. วิธีดู Network Requests (เช็ค API และ Backend)

ส่วนนี้จะบอกว่าเว็บมีการคุยอะไรกับ Server บ้าง ข้อมูลส่งไปถูกไหม และ Server ตอบอะไรกลับมา

1. **เลือก Action:** เหมือนเดิมครับ คลิกที่ Action ฝั่งซ้ายที่เกี่ยวข้อง (เช่น จังหวะกดปุ่ม "Save" หรือจังหวะโหลดหน้าเว็บ)
2. **คลิกแท็บ "Network":** (อยู่ข้างๆ แท็บ Console)
3. **ดูรายการ Request:** คุณจะเห็นรายชื่อ URL ที่ถูกเรียกในช่วงเวลานั้น
    * **Status Code:** ดูคอลัมน์นี้ก่อนเลยครับ ถ้าเจอ **400 (Bad Request)** หรือ **500 (Server Error)** แสดงว่าเจอตัวการแล้ว
4. **เจาะลึกข้อมูล (สำคัญมาก):**
    * ให้คลิกที่ชื่อ URL (เช่น `/api/login`) ในรายการนั้น
    * มันจะเปิดรายละเอียดขึ้นมา ให้ดู 2 ส่วนสำคัญ:
        * **Request Body:** ดูว่าเราส่งค่าไปถูกไหม? (เช่น ส่ง JSON `{ username: "admin" }` หรือส่งไปผิด format)
        * **Response Body:** ดูว่า Server ตอบอะไรกลับมา? (เช่น ตอบ Error message ว่า `"Invalid password"` หรือตอบ HTML กลับมาทั้งที่ควรเป็น JSON)

***

### 3. เทคนิคพิเศษ: การดู Timeline ของ Network

บางครั้ง Request มันเกิดขึ้น **ก่อน** หรือ **หลัง** Action ที่เรากด

* ให้มองไปที่ **แถบ Timeline ด้านบนสุด**
* คุณจะเห็น **แถบสีๆ (Bars)** ใต้ Timeline นั่นคือช่วงเวลาที่ Network ทำงาน
* **สีของแถบ:**
    * **สีฟ้า/เขียว:** โหลดสำเร็จ (200 OK)
    * **สีแดง:** โหลดไม่ผ่าน (4xx, 5xx) หรือ Failed
    * **สีเหลือง:** Redirect (3xx)
* ถ้าเอาเมาส์ไปชี้ที่แถบสีแดงบน Timeline มันจะโชว์ชื่อ URL ที่พังทันที ช่วยให้หาจุดผิดสังเกตได้เร็วกว่าการไล่กดทีละ Action ครับ

**สรุป:**

* ถ้า **หน้าพัง/กดไม่ไป** -> ดู **Console**
* ถ้า **ข้อมูลไม่มา/Save ไม่ได้** -> ดู **Network** (เช็ค Status 500 และ Response Body)

