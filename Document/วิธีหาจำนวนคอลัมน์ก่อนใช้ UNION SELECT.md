<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ UNION SELECT

‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå (Column Enumeration) ‡πÄ‡∏õ‡πá‡∏ô **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ SQL Injection ‡πÅ‡∏ö‡∏ö Union-Based ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏é‡πÄ‡∏´‡∏•‡πá‡∏Å‡∏Ç‡∏≠‡∏á `UNION` ‡∏Ñ‡∏∑‡∏≠ **"‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô"** ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô Database ‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á Error ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

‡∏°‡∏µ 2 ‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà Reviewer ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ:

### 1. ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ `ORDER BY` (‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏¥‡∏¢‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)

‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏™‡∏±‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á" Database ‡∏à‡∏∞ Error

**‡∏™‡∏°‡∏°‡∏ï‡∏¥ Query ‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô:**
`SELECT id, title, content FROM news WHERE id = $id` (‡∏°‡∏µ 3 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå)

**‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö:** ‡πÉ‡∏™‡πà‡πÄ‡∏•‡∏Ç‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡πÉ‡∏ô URL ‡∏´‡∏£‡∏∑‡∏≠ Input

* `id=1 ORDER BY 1 --` ‚úÖ (‡∏ú‡πà‡∏≤‡∏ô: ‡∏°‡∏µ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 1)
* `id=1 ORDER BY 2 --` ‚úÖ (‡∏ú‡πà‡∏≤‡∏ô: ‡∏°‡∏µ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 2)
* `id=1 ORDER BY 3 --` ‚úÖ (‡∏ú‡πà‡∏≤‡∏ô: ‡∏°‡∏µ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà 3)
* `id=1 ORDER BY 4 --` ‚ùå **(Error!)**
    * *‡∏™‡∏£‡∏∏‡∏õ:* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ **3 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå**

***

### 2. ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ `UNION SELECT NULL` (‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏Å‡∏ß‡πà‡∏≤)

‡∏ñ‡πâ‡∏≤‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏£‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ú‡∏• (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏¥‡∏î Error Message ‡πÑ‡∏ß‡πâ) ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ `UNION SELECT` ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô `NULL` ‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏õ‡∏Å‡∏ï‡∏¥

**‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö:**

* `id=1 UNION SELECT NULL --` ‚ùå (Error: ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤)
* `id=1 UNION SELECT NULL, NULL --` ‚ùå (Error: ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤)
* `id=1 UNION SELECT NULL, NULL, NULL --` ‚úÖ **(‡∏ú‡πà‡∏≤‡∏ô!)** ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏Å‡∏ï‡∏¥
    * *‡∏™‡∏£‡∏∏‡∏õ:* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ **3 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå**

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ NULL?**
‡πÄ‡∏û‡∏£‡∏≤‡∏∞ `NULL` ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å Data Type (‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Int, String, ‡∏´‡∏£‡∏∑‡∏≠ Date) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏≤‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

***

### ‡∏™‡∏£‡∏∏‡∏õ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

| ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ | ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ | ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ |
| :-- | :-- | :-- |
| **ORDER BY** | ‡πÄ‡∏£‡πá‡∏ß, ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ô‡πâ‡∏≠‡∏¢ | ‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡∏ö‡∏≤‡∏á Database ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏£‡πà‡∏á‡∏Ñ‡∏£‡∏±‡∏î‡∏°‡∏≤‡∏Å |
| **UNION SELECT NULL** | ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥, ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å DB | ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏¢‡∏≠‡∏∞, ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏•‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö |

### üõ°Ô∏è ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Developer)

‡∏ñ‡πâ‡∏≤‡πÄ‡∏à‡∏≠‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà SQL ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà **‡∏ß‡∏¥‡∏ò‡∏µ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤**

* **‡∏´‡πâ‡∏≤‡∏°:** ‡πÄ‡∏≠‡∏≤ Input ‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢ `ORDER BY` ‡∏ï‡∏£‡∏á‡πÜ
* **‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤ Input ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠ (Allowlist)

```typescript
// ‚úÖ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô (Node.js)
const allowedSorts = ['id', 'title', 'date'];
const sortBy = allowedSorts.includes(req.query.sort) ? req.query.sort : 'id'; // ‡∏ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏õ‡∏•‡∏Å‡πÜ ‡∏°‡∏≤ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ default

const sql = `SELECT * FROM news ORDER BY ${sortBy}`; // ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡πà‡∏≤ sortBy ‡∏°‡∏≤‡∏à‡∏≤‡∏Å list ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Ñ‡∏∏‡∏°‡πÄ‡∏≠‡∏á
```


<span style="display:none">[^1][^2][^3][^4][^5][^6][^7][^8][^9]</span>

<div align="center">‚ÅÇ</div>

[^1]: https://saixiii.com/database-sql-union-clause/

[^2]: https://www.reddit.com/r/SQL/comments/1fmbj1d/how_to_union_all_two_select_statements_where_for/

[^3]: https://www.reddit.com/r/SQL/comments/14fbypt/can_somebody_explain_this_rule_for_union_the/

[^4]: https://www.mindphp.com/‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå/‡∏™‡∏≠‡∏ô-sql/3928-postgresql-sql-union.html

[^5]: https://www.codebee.co.th/labs/‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô-union-‡πÉ‡∏ô-mysql/

[^6]: https://www.9experttraining.com/articles/dax-functions-a-to-z

[^7]: https://staff.informatics.buu.ac.th/~komate/886301/DB-Chpater-8.pdf

[^8]: https://www.guru99.com/th/unions.html

[^9]: https://www.youtube.com/watch?v=oIqMpafmYbc

